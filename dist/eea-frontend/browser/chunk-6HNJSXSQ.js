import{$ as p,Aa as E,I as y,Ia as w,aa as l,ca as a,ea as r,k as u,l as v,ld as x,rb as f,u as m}from"./chunk-WRPGBDYM.js";var C=new a("recaptcha-language"),M=new a("recaptcha-base-url"),A=new a("recaptcha-nonce-tag"),se=new a("recaptcha-settings"),j=new a("recaptcha-v3-site-key"),I=new a("recaptcha-loader-options");function S(e,h,i,{url:t,lang:n,nonce:s}={}){window.ng2recaptchaloaded=()=>{i(grecaptcha)};let o=document.createElement("script");o.innerHTML="";let{url:c,nonce:d}=h(new URL(t||"https://www.google.com/recaptcha/api.js"));c.searchParams.set("render",e==="explicit"?e:e.key),c.searchParams.set("onload","ng2recaptchaloaded"),c.searchParams.set("trustedtypes","true"),n&&c.searchParams.set("hl",n),o.src=c.href;let b=d||s;b&&o.setAttribute("nonce",b),o.async=!0,o.defer=!0,document.head.appendChild(o)}function D({v3SiteKey:e,onBeforeLoad:h,onLoaded:i}){let t=e?{key:e}:"explicit";R.loadScript(t,h,i)}var R={loadScript:S,newLoadScript:D};function O(e){return e.asObservable().pipe(y(h=>h!==null))}var g=(()=>{class e{static{this.ready=null}constructor(i,t,n,s,o,c){this.platformId=i,this.language=t,this.baseUrl=n,this.nonce=s,this.v3SiteKey=o,this.options=c;let d=this.init();this.ready=d?O(d):m()}init(){if(e.ready)return e.ready;if(!x(this.platformId))return;let i=new v(null);return e.ready=i,R.newLoadScript({v3SiteKey:this.v3SiteKey,onBeforeLoad:t=>{if(this.options?.onBeforeLoad)return this.options.onBeforeLoad(t);let n=new URL(this.baseUrl??t);return this.language&&n.searchParams.set("hl",this.language),{url:n,nonce:this.nonce}},onLoaded:t=>{let n=t;this.options?.onLoaded&&(n=this.options.onLoaded(t)),i.next(n)}}),i}static{this.\u0275fac=function(t){return new(t||e)(r(w),r(C,8),r(M,8),r(A,8),r(j,8),r(I,8))}}static{this.\u0275prov=p({token:e,factory:e.\u0275fac})}}return e})();var B=(()=>{class e{static{this.\u0275fac=function(t){return new(t||e)}}static{this.\u0275mod=f({type:e})}static{this.\u0275inj=l({})}}return e})(),re=(()=>{class e{static{this.\u0275fac=function(t){return new(t||e)}}static{this.\u0275mod=f({type:e})}static{this.\u0275inj=l({providers:[g],imports:[B]})}}return e})(),k=(()=>{class e{constructor(i,t,n){this.recaptchaLoader=t,this.zone=i,this.siteKey=n,this.init()}get onExecute(){return this.onExecuteSubject||(this.onExecuteSubject=new u,this.onExecuteObservable=this.onExecuteSubject.asObservable()),this.onExecuteObservable}get onExecuteError(){return this.onExecuteErrorSubject||(this.onExecuteErrorSubject=new u,this.onExecuteErrorObservable=this.onExecuteErrorSubject.asObservable()),this.onExecuteErrorObservable}execute(i){let t=new u;return this.grecaptcha?this.executeActionWithSubject(i,t):(this.actionBacklog||(this.actionBacklog=[]),this.actionBacklog.push([i,t])),t.asObservable()}executeActionWithSubject(i,t){let n=s=>{this.zone.run(()=>{t.error(s),this.onExecuteErrorSubject&&this.onExecuteErrorSubject.next({action:i,error:s})})};this.zone.runOutsideAngular(()=>{try{this.grecaptcha.execute(this.siteKey,{action:i}).then(s=>{this.zone.run(()=>{t.next(s),t.complete(),this.onExecuteSubject&&this.onExecuteSubject.next({action:i,token:s})})},n)}catch(s){n(s)}})}init(){this.recaptchaLoader.ready.subscribe(i=>{this.grecaptcha=i,this.actionBacklog&&this.actionBacklog.length>0&&(this.actionBacklog.forEach(([t,n])=>this.executeActionWithSubject(t,n)),this.actionBacklog=void 0)})}static{this.\u0275fac=function(t){return new(t||e)(r(E),r(g),r(j))}}static{this.\u0275prov=p({token:e,factory:e.\u0275fac})}}return e})(),oe=(()=>{class e{static{this.\u0275fac=function(t){return new(t||e)}}static{this.\u0275mod=f({type:e})}static{this.\u0275inj=l({providers:[k,g]})}}return e})();export{j as a,re as b,k as c,oe as d};
