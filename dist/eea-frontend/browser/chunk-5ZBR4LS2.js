import{g as D}from"./chunk-UOAM75BV.js";import{M as s,X as E}from"./chunk-RIYVHW5G.js";import{Bc as v,Gb as p,P as u,Sc as C,Xa as a,Zb as m,fb as c,na as f,ra as h,sc as y,wa as g}from"./chunk-5MZ4X5ZA.js";var x={provide:D,useExisting:u(()=>S),multi:!0},K={pint:/^[\d]*$/,int:/^[-]?[\d]*$/,pnum:/^[\d\.]*$/,money:/^[\d\.\s,]*$/,num:/^[-]?[\d\.]*$/,hex:/^[0-9a-f]*$/i,email:/^[a-z0-9_\.\-@]*$/i,alpha:/^[a-z_]*$/i,alphanum:/^[a-z0-9_]*$/i},d={TAB:9,RETURN:13,ESC:27,BACKSPACE:8,DELETE:46},V={63234:37,63235:39,63232:38,63233:40,63276:33,63277:34,63272:46,63273:36,63275:35},S=(()=>{class l{document;platformId;el;pValidateOnly;set pattern(t){this._pattern=t,t instanceof RegExp?this.regex=t:t in K?this.regex=K[t]:this.regex=/./}get pattern(){return this._pattern}ngModelChange=new f;regex=/./;_pattern;isAndroid;lastValue;constructor(t,e,i){this.document=t,this.platformId=e,this.el=i,C(this.platformId)?this.isAndroid=E():this.isAndroid=!1}isNavKeyPress(t){let e=t.keyCode;return e=s().safari&&V[e]||e,e>=33&&e<=40||e==d.RETURN||e==d.TAB||e==d.ESC}isSpecialKey(t){let e=t.keyCode||t.charCode;return e==9||e==13||e==27||e==16||e==17||e>=18&&e<=20||s().opera&&!t.shiftKey&&(e==8||e>=33&&e<=35||e>=36&&e<=39||e>=44&&e<=45)}getKey(t){let e=t.keyCode||t.charCode;return s().safari&&V[e]||e}getCharCode(t){return t.charCode||t.keyCode||t.which}findDelta(t,e){let i="";for(let n=0;n<t.length;n++)t.substr(0,n)+t.substr(n+t.length-e.length)===e&&(i=t.substr(n,t.length-e.length));return i}isValidChar(t){return this.regex.test(t)}isValidString(t){for(let e=0;e<t.length;e++)if(!this.isValidChar(t.substr(e,1)))return!1;return!0}onInput(t){if(this.isAndroid&&!this.pValidateOnly){let e=this.el.nativeElement.value,i=this.lastValue||"",n=this.findDelta(e,i),r=this.findDelta(i,e);n.length>1||!n&&!r?this.isValidString(e)||(this.el.nativeElement.value=i,this.ngModelChange.emit(i)):r||this.isValidChar(n)||(this.el.nativeElement.value=i,this.ngModelChange.emit(i)),e=this.el.nativeElement.value,this.isValidString(e)&&(this.lastValue=e)}}onKeyPress(t){if(this.isAndroid||this.pValidateOnly)return;let e=s(),i=this.getKey(t);if(e.mozilla&&(t.ctrlKey||t.altKey))return;if(i==17||i==18||i==13)return;let n=this.getCharCode(t),r=String.fromCharCode(n),o=!0;if(!e.mozilla&&(this.isSpecialKey(t)||!r))return;let A=(this.el.nativeElement.value||"")+r;o=this.regex.test(A),o||t.preventDefault()}onPaste(t){let e=t.clipboardData||this.document.defaultView.clipboardData.getData("text");if(e){let i=/\{[0-9]+\}/,n=e.getData("text");if(i.test(this.regex.toString())){if(!this.regex.test(n)){t.preventDefault();return}}else for(let r of n.toString())if(!this.regex.test(r)){t.preventDefault();return}}}validate(t){if(this.pValidateOnly){let e=this.el.nativeElement.value;if(e&&!this.regex.test(e))return{validatePattern:!1}}}static \u0275fac=function(e){return new(e||l)(a(v),a(g),a(h))};static \u0275dir=c({type:l,selectors:[["","pKeyFilter",""]],hostBindings:function(e,i){e&1&&p("input",function(r){return i.onInput(r)})("keypress",function(r){return i.onKeyPress(r)})("paste",function(r){return i.onPaste(r)})},inputs:{pValidateOnly:[2,"pValidateOnly","pValidateOnly",y],pattern:[0,"pKeyFilter","pattern"]},outputs:{ngModelChange:"ngModelChange"},features:[m([x])]})}return l})();export{S as a};
